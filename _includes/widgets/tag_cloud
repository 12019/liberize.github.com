<a href="{{ site.JB.tags_path }}" title="查看所有标签"><i class="icon-fixed-width icon-tags"></i> 标签云</a>
<span title="标签总数">{{ site.tags | size }}</span>
<div id="tag-cloud">
{% assign first = site.tags | first %}{% assign max = first[1].size %}{% assign min = max %}{% for tag in site.tags offset:1 %}{% if tag[1].size > max %}{% assign max = tag[1].size %}{% elsif tag[1].size < min %}{% assign min = tag[1].size %}{% endif %}{% endfor %}{% capture diff %}{{ max | minus: min }}{% endcapture %}
{% for tag in site.tags %}
  {% capture temp %}{{ tag[1].size | minus: min | times: 36 | divided_by: diff }}{% endcapture %}{% capture base %}{{ temp | divided_by: 4 }}{% endcapture %}{% capture remain %}{{ temp | modulo: 4 }}{% endcapture %}{% if remain == '0' %}{% capture size %}{{ base | plus: 9 }}{% endcapture %}{% elsif remain == '1' or remain == '2' %}{% capture size %}{{ base | plus: 9 | append: '.5' }}{% endcapture %}{% else %}{% capture size %}{{ base | plus: 10 }}{% endcapture %}{% endif %}{% if remain == '0' or remain == '1' %}{% capture color %}{{ '9' | minus: base }}{% endcapture %}{% else %}{% capture color %}{{ '8' | minus: base }}{% endcapture %}{% endif %}
  <a href="{{ site.JB.tags_path }}#{{ tag[0] }}-ref" rel="nofollow" style="font-size: {{ size }}pt; color: #{{ color }}{{ color }}{{ color }};">{{ tag[0] }}</a>
{% endfor %}
</div>